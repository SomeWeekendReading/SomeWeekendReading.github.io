Notes on blogging tech.

* DONE: Git ritual for publishing updates:
  - edit/create files (but not delete, see git rm below)
  - git status
    reports what has changed wrt github
  - git add file
    git rm  file
    adds/removes changed files to the staging area
  - git commit -F -
    commits, reading commit comment from stdin in weird emacs shell
    (or combine add & commit in git commit -a -F -)
    or
    git commit -a -m "msg"
    will automatically add changed files that are tracked (not new files), and use commit msg
  - git push -u origin master
    pushes changes up to github, where site will be rebuilt
  - git status
    to check whether it all worked
  - use git clone to re-download from github to the local machine

* DONE: Domain:
  - Recommendation of https://www.quicksprout.com/how-to-start-a-blog/ to use domain.com,
    with promo code QUICKSPROUT.  Buy domain privacy so people can't find your personal
    name.  Do automatic renewal.  Skip the rest.
  - someweekendreading.blog $122.03 for 5 years, with discount from QUICKSPROUT promo code.
  - Need to configure www.someweekendreading.blog as an alias/a record?  What's cname?
  - Need to figure out configuration, and make www subdomain, but it seems to be working?
  - For now appears to be 66.96.162.140
  - To see what the DNS thinks of the domain:
    $ dig someweekendreading.blog www.someweekendreading.blog
  - So... ANAME the apex domain to the www domain; CNAME the www domain to sgr000.github.io
    Domain.com doesn't allow ANAME, so have to do 4 A records?
    185.199.108.153
    185.199.109.153
    185.199.110.153
    185.199.111.153
  - Got https working: check the appropriate box on Github (ignore domain.com!), remove
    all http: links for mixed content, and wait a bit.
    URL is now: https://www.someweekendreading.blog/
  - Looks like www.someweekendreading.blog forward to someweekendreading.blog and not the
    other way around, but that may be a Chrome "abbreviation" in the URL box?  (Yes:
    Firefox, of course, does The Right Thing and displays https://www...)
  - DNS opinion of what's what:
    $ dig someweekendreading.blog www.someweekendreading.blog

    ; <<>> DiG 9.10.6 <<>> someweekendreading.blog www.someweekendreading.blog
    ;; global options: +cmd
    ;; Got answer:
    ;; ->>HEADER<<- opcode: QUERY, status: NOERROR, id: 28028
    ;; flags: qr rd ra; QUERY: 1, ANSWER: 4, AUTHORITY: 0, ADDITIONAL: 1

    ;; OPT PSEUDOSECTION:
    ; EDNS: version: 0, flags:; udp: 512
    ;; QUESTION SECTION:
    ;someweekendreading.blog.	IN	A

    ;; ANSWER SECTION:
    someweekendreading.blog. 3600	IN	A	185.199.109.153
    someweekendreading.blog. 3600	IN	A	185.199.111.153
    someweekendreading.blog. 3600	IN	A	185.199.108.153
    someweekendreading.blog. 3600	IN	A	185.199.110.153

    ;; Query time: 70 msec
    ;; SERVER: 192.168.1.1#53(192.168.1.1)
    ;; WHEN: Mon Sep 21 21:39:58 EDT 2020
    ;; MSG SIZE  rcvd: 116

    ;; Got answer:
    ;; ->>HEADER<<- opcode: QUERY, status: NOERROR, id: 59452
    ;; flags: qr rd ra; QUERY: 1, ANSWER: 5, AUTHORITY: 0, ADDITIONAL: 1

    ;; OPT PSEUDOSECTION:
    ; EDNS: version: 0, flags:; udp: 512
    ;; QUESTION SECTION:
    ;www.someweekendreading.blog.	IN	A

    ;; ANSWER SECTION:
    www.someweekendreading.blog. 3583 IN	CNAME	someweekendreading.github.io.
    someweekendreading.github.io. 3583 IN	A	185.199.109.153
    someweekendreading.github.io. 3583 IN	A	185.199.110.153
    someweekendreading.github.io. 3583 IN	A	185.199.108.153
    someweekendreading.github.io. 3583 IN	A	185.199.111.153

    ;; Query time: 13 msec
    ;; SERVER: 192.168.1.1#53(192.168.1.1)
    ;; WHEN: Mon Sep 21 21:39:58 EDT 2020
    ;; MSG SIZE  rcvd: 162

* DONE: Get tags working without a plugin (https://github.com/mynux/jekyll-hashtags),
  because github won't do that.  Instead:
  https://longqian.me/2017/02/09/github-jekyll-tag/#:~:text=If%20you%20want%20to%20add,of%20Github%20default%20jekyll%20plugins.

* DONE: Add sitemap (can't use plugin, have to manually make sitemap.xml script)
  (https://davidensinger.com/2013/11/building-a-better-sitemap-xml-with-jekyll/)
  Optional frontmatter to add to posts:
  sitemap:
    lastmod: 2014-01-23
    priority: 0.7
    changefreq: 'monthly'
    exclude: 'yes'

* DONE:
  - Jekyll docs: https://jekyllrb.com/
  - github markdown cheatsheet: https://github.com/adam-p/markdown-here/wiki/Markdown-Cheatsheet
  - Tool on net to resize images: https://resizeimage.net/

* DONE: text wrapping around images: 
  https://allwebco-templates.com/support/S_textwrap.htm#:~:text=You%20might%20want%20to%20have,border%20using%20CSS%20border%20code.

  The following code uses css float:left. Add the image code below just before the text that
  you want to have wrap. Place an image named "yourimage.jpg" in your "picts"
  folder. Select, copy, and paste the following code into your HTML page.  Add your wrapping
  text paragraph after the image code. Edit to float left or right, and adjust the margins
  and border styles to your requirements. Note: Margin code is in order; top, right, bottom,
  left.

  <a href="picts/yourimage.jpg" target="_blank"><img src="picts/yourimage.jpg" height="100" width="100" alt="Image alt text" title="Image title" style="float: right; margin: 3px 3px 3px 0px; border: 1px solid #000000;"></a>

* DONE: feed works with theoldreader.com.  Yay!  Now blog link is stored in my feeds.

* DONE: Submit sitemap.xml to Google, to get us crawled
    - https://search.google.com/search-console/welcome (while logged in as SomeWeekendReadingEditor)
      Instructed to add a TXT entry to DNS with a certain google-site-verification value,
      to prove ownership. Did that, waiting for it to propagate. (the www subdomain)
    - *** Is google looking at the apex domain, whereas I put the verification on www subdomain?
      Moved the TXT property to @; wait overnight to see if it verifies.
      That worked!
    - Submitted https://www.someweekendreading.blog/sitemap.xml
      Google retrieved it.
    - Now what?  Wait for a day.
    - We're indexed!  A search for "Occasional tart thoughts of a grumpy old retired
      scientist, your humble Weekend Editor." came up with the page.

    * Check your XML Sitemap is on your server and the URL loads (or use a sitemap testing
      tool, of which there are many). Usually, you upload your sitemap.xml file to the
      root directory of your website. It’s quite normal to have it located at:
      https://mywebsite.com/sitemap.xml
    * Log in to Search Console
    * Under “Crawl,” choose “Sitemaps”
    * Click “Add/Test Sitemap”
    * Enter the URL of the sitemap and click “Submit Sitemap”

* DONE: To clear history (but also remove myself as collaborator, and use personal access token!)
    ## Delete all the old history in local clone
    rm -rf .git
    ## Make this directory a new repository
    git init
    git add .
    git commit -m "Initial commit"
    ## Connect it to the remot at github
    git remote add origin git@github.com:SomeWeekendReading/someweekendreading.github.io.git
    ## Change the connect method from SSH to HTTPS
    git remote -v
    git remote set-url origin https://github.com/SomeWeekendReading/someweekendreading.github.io.git
    git remote -v
    ## Push everything up to the remote repo
    ## *** Requires to be a collaborator, or supply SWR credentials somehow?
    git push --mirror --force

* DONE: Comments: https://staticman.net/
    A more detailed guide (recent version, not incompatible older guides, which are confusing!)
    https://travisdowns.github.io/blog/2020/02/05/now-with-comments.html
    - Set up GitHub bot account: needs its own, unique email address?!
      Gmail account: SomeWeekendReadingBot@gmail.com, password in Bitwarden; forwards to me
      Github account: SomeWeekendReadingBot, password in Bitwarden
    - Generate personal access token (PAT):
      See https://docs.github.com/en/github/authenticating-to-github/creating-a-personal-access-token
      With repo and user access: stored in Bitwarden, under SomeWeekendReading
    - staticman stuff in _config.yml is for static build; stuff in staticman.yml is for
      dynamic comments (i.e., the bot?)
      o took travid downs's sample staticman.yml
      o modified as per his suggestions; made dir _data/comments
      o added staticman_url field to _config.yml
    - Generate RSA keypair:
      $ ssh-keygen -m PEM -t rsa -b 4096 -C "staticman key" -f ~/.ssh/staticman_key
      Generating public/private rsa key pair.
      Enter passphrase (empty for no passphrase): 
      Enter same passphrase again: 
      Your identification has been saved in /Users/sgr/.ssh/staticman_key.
      Your public key has been saved in /Users/sgr/.ssh/staticman_key.pub.
      The key fingerprint is:
      SHA256:o5tk2wfez92NAViGwdyp2ll8PsJ8rb7nr4iEm2AE0qg staticman key
      The key's randomart image is:
      +---[RSA 4096]----+
      |         o.. .   |
      |   o      ooo    |
      |  o o     .oo    |
      | . . .    .+o .  |
      |E     . So.=.o . |
      |     . .ooo +.+ .|
      |      *..o.  o.o |
      |     + *.+oo o.+o|
      |      + +...+.*=*|
      +----[SHA256]-----+
      $ head -2 ~/.ssh/staticman_key
      -----BEGIN RSA PRIVATE KEY-----
      MIIJKQIBAAKCAgEA18W7rSmk3HxI7Kxdl542ELllxIDY8wUIUENooSxoA8m27bLP
    - Sign up for heroku https://signup.heroku.com/
      FN: SomeWeekendReading LN: Bot
      Gave bot email address, role "other", use "another language"
      Verified email, password in Bitwarden
    - Deploy staticman to heroku: follow travis's instructions
    - Configure bridge secrets: didn't want to install heroku CLI, so...
      o At heroku, click on app, then Settings -> Reveal Config Vars
      o Add RSA_PRIVATE_KEY and GITHUB_TOKEN
        NB: my RSA_PRIVATE_KEY shows multiple lines, whereas Travis's is on 1 long line?!
	Whoops, on the command line he does $(cat ~/.ssh/staticman_key | tr -d '\n'), so
	maybe I have to remove newlines?   Did the cat/tr thing above to get the string
	to paste into the Heroku config var, and now it looks like his.
    - Invite & accept bot to blog
      SomeWeekendReading invited SomeWeekendReadingBot
      Accepted via the email, not the weird https thing Travis said
    - Enable reCAPTCHA: v2/checkbox style  (NB: done with the BOT account, not the blog
      account, which technically owns the domain!)
      https://developers.google.com/recaptcha
      Took some hunting to find the signup area, but found it & generated the site key &
      secret key.  Stored both in Bitwarden, SomeWeekendReading Github account.
      o Encrypt: https://staticman-someweekendreading.herokuapp.com/v2/encrypt/SECRET-KEY
        (travis says YOUR-SITE-KEY, but obviously it has to be the secret key!)
        got the big blob
      o Put stuff in staticman.yml and _config.yml

    - Integrate comments into site: use the version that allows 1 level of reply (only)
      o Add some liquid script to the bottom of any post
        made comments.html in _includes, also comment.html and comment_form.html
	include add to in post.html in _layouts (where disqus used to be)
      o Have to set comments: true in front matter of posts; added to existing posts
      o Didn't try to host all the javascript stuff myself
    - Tried a test comment
      o got a page with this on it:
        {"success":true,"fields":{"replying_to_uid":"","message":"Test comment","name":"Weekend Editor","email":"f69a760795868739158aee5168b63b69","hp":"","date":1600817677}}
      o So... will users see that?!  No, fixed when I put in more stuff (js, mostly)
      o Got an email, forwarded from someweekendreading@gmail.com.  Merged, and it
        appeared.  If I close w/o merging, comment is rejected.  Nice.
      o Either way leaves a branch behind, but you can delete those.

* DONE: Comments: reformat to civilized size

* DONE: Put last build time in footer, so I can tell if it rebuilt?

* DONE: footer badges

* DONE: HTML validation always looks at the front page, not the exact referer?  Looks like an
  HTTPS issue: https://validator.w3.org/docs/help.html#faq-referer
  So now using absolute URL, not referer... *sigh*

* DONE: Combine all tags onto 1 page, make tag refs go to #tag on that page.  Also, sort
  tags by name, and posts for each tag in reverse chronological order.

* DONE: Test math: kramdown/mathjax?
    https://hw311.me/en/jekyll/2019/01/23/support-latex-in-jekyll-blog/
  Also escaped existing $ characters.

* DONE: add w3c link checks: n
  https://validator.w3.org/checklink?uri=https%3A%2F%2Fwww.someweekendreading.blog%2F&hide_type=all&depth=&check=Check

* DONE: Get favicon working in Chrome (already works in Firefox & Safari).
    Changed to 48x48, cleared history, restarted Chrome.

* DONE: Put footer icons at the TOP of the page, RHS opposite the permalinks?

* DONE: Figure out how to add svg icons for home, about, tags, and sitemap to
    _sass/_svg-icons.scss, and then use them in the nav bar.  Remove from footer.
    https://base64.guru/converter/encode/image/svg is good for base64-converting svg
    files; be sure to select Output Format = CSS Background Image -- backgrond-image:url()
  But... Home and Sitemap icons not showing!

* DONE: using google material icons

* DONE: How to add R code, served as a separate page? Put it in the assets dir?  Maybe as an
    .md file, but with code typeset?  Then refer to it in the references? :-)
  NB: .md files in assets/ must have a date: field in the YML frontmatter, and should
  have comments turned off.  Also, escape quotes in title with &quot; and &apos;.

--------------------------------------------------------------------------------

Post topics: "though borrowing trouble is often my wont" as an anxiety-prone depressive!

Blog posts:
* Impact of election years on stock returns (old weekend reading)
* Sam's game (email of 2016-Nov-20)
* Solstice sun times
* Yield curve model
* Bitwarden Roolz!
* Trump and QAnon as the Black Death and the flagellants
  https://en.wikipedia.org/wiki/Flagellant
  http://www.eyewitnesstohistory.com/flagellants.htm
  https://www.newadvent.org/cathen/06089c.htm
  https://sites.google.com/site/theblackdeathmary/daily-life/the-flagellants
  https://blackdeathfacts.com/flagellants/
  ... and the hatred of Obamacare.
* SIR modeling of COVID-19
  scientists weren't ready to be so wrong in their assumptions... about politicians
  https://fivethirtyeight.com/features/coronavirus-models-were-always-about-more-than-flattening-the-curve/
  "using a model effectively is harder than just doing the math"
  "But people turn out to be really, really complicated. And even seven months later, that’s a lesson we’re still struggling to learn."
* M&Ms and the multinomial distribution
* Droste effect (continuing the chocolate theme)
* Chocolate phase diagram
* Are corporate bonds like treasuries + stock?  (Specific stock or total market?  Best diversifier?)
* Continued fraction expansion of probability distributions
* Rational polynomial models of the treasury yield curve
* Conformal mapping, heat tranfer, and wind chill: why is it so damn cold out there?
* The Numen and the Noumenon
* Sutor, non ultra crepidam!
* Meyers-Briggs Type Inventory: Valid Personality Test, or HR Woo?
* My retirement portfolio
* Railgun vs reality: the hopeless thermodynamics
* Dreams of Revolution
* My Spirit Animal: Jean-Luc Picard (see face-palm in My Pictures)
* Newscycle != History
* On Dorothea Brooke, A Hero... and Not
  Her full nature, like that river of which Cyrus broke the strength, spent itself in
  channels which had no great name on the earth. But the effect of her being on those around
  her was incalculably diffusive: for the growing good of the world is partly dependent on
  unhistoric acts; and that things are not so ill with you and me as they might have been,
  is half owing to the number who lived faithfully a hidden life, and rest in unvisited
  tombs. -- George Eliot, _Middlemarch_, of the character Dorothea
  https://www.livius.org/sources/content/herodotus/cyrus-takes-babylon/
* Nontransitive dice
* Blogging infrastructure: Github, Jekyll, Staticman, Heroku, Github Pages, ... Oh, my!
* A rebalancing chi-square test: when is my portfolio REALLY in need of rebalancing?
* Eulenspieglia: the Merry Prankster Muse, or Through the Owl Mirror
* Michel de Montaigne: The Ur-Blogger, Or: How to Freak Out French Teennagers with Your Beach Reading at Club Med
* The smartest people in the room
* The requisite post on monads
* Psychotherapy and machine learning: how much corrective experience is required for change?
* The L1-regularized efficient frontier
* https://bigthink.com/strange-maps/four-folkways and Scott Alexander's review of _Albion's Seed_
* How bad is the Corona unemployment?
  https://3.bp.blogspot.com/-uqLs0cxchY0/X1I01cbu9CI/AAAAAAAA2EQ/N4XHh9ts9zggWDzwtiAiM1tuQjA4paDxwCLcBGAsYHQ/s1600/EmployRecessionAug2020.PNG
* Bohmian mechanics: http://backreaction.blogspot.com/2020/10/david-bohms-pilot-wave-interpretation.html
  Turn wf into absolute value & phase, put int TDSE, separate into real & imag parts.
  One is cons prob & determines what guiding field does, other is "guiding equation" and
  determines particle position, depends on guiding field.  To get prob for particle @ posn
  in guiding field, need 3rd eqn: quantum equil hypothesis, more or less Born's rule.
  Exact same results as QM, but particle is in 1 place always.  But more non-local than
  QM: guiding field dep on ALL particles to be measured, can't make QFT.
* ...?

